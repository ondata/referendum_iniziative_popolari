---
import Layout from '../layouts/Layout.astro';
import TableView from '../components/TableView.tsx';
import Footer from '../components/Footer.astro';
import { fetchInitiatives } from '../lib/initiatives';

const initiatives = await fetchInitiatives();
const baseUrl = import.meta.env.BASE_URL || '/';
---

<Layout
  title="Vista Tabellare - Iniziative Democratiche"
  description="Visualizza tutte le iniziative democratiche in formato tabellare"
  canonicalizeToBase={true}
>
  <main id="main-content" role="main" class="min-h-screen bg-gray-50">
    <h1 class="sr-only">Vista Tabellare Iniziative</h1>
    <TableView
      initiatives={initiatives}
      baseUrl={baseUrl}
      client:load
    />
  </main>

  <!-- Footer -->
  <Footer role="contentinfo" />
</Layout>
